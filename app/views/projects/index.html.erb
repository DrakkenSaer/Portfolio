<% provide(:title, "Projects") %>

<h1>Projects</h1>

<% if signed_in? %>
<%= link_to 'Add new project', new_project_path, class: 'center' %>
<% end %>

<!-- Russian doll caching model data and then render results to page -->
<% cache(@projects) do %>
<% @projects.each_slice(3) do |slice| %>
<% cache(slice) do %>
<div class="row">
  <% slice.each do |project| %>
  <%= render 'projects/display', project: project, size: 'small', link: project, col_size: "col-md-4", description: truncate(project.description, length:200), img_type: "img-responsive" %>
  <% end %>
</div>
<% end %>
<% end %>
<% end %>

<!-- paginate model data -->
<%= will_paginate @projects %>